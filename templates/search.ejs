<!DOCTYPE html>
<html>
<head>
    <title>Search Page</title>
</head>
<body>
    <h1>Search Medicine by Generic Name</h1>

    <form method="POST" action="/searched">
        <input
            type="text"
            name="generic"
            placeholder="e.g. ibuprofen"
            required
        />
        <button type="submit">Search</button>
    </form>

    <% if (error) { %>
        <p style="color:red;"><%= error %></p>
    <% } %>

    <% if (result) { %>
        <h2>Medicine Found</h2>

        <p><strong>Generic Name:</strong> <%= result.generic_name %></p>
        <p><strong>Brand Name:</strong> <%= result.brand_name %></p>
        <p><strong>Labeler:</strong> <%= result.labeler_name %></p>
        <p><strong>Dosage Form:</strong> <%= result.dosage_form %></p>

        <p><strong>Active Ingredients:</strong></p>
        <ul>
            <% if (result.active_ingredients.length > 0) { %>
                <% result.active_ingredients.forEach(ai => { %>
                    <li><%= ai.name %> â€“ <%= ai.strength %></li>
                <% }) %>
            <% } else { %>
                <li>No active ingredient data available</li>
            <% } %>
        </ul>
        <form method="GET" action="/purchase">
            <input type="hidden" name="medicine" value="<%= result.generic_name %>">
            <button type="submit">Purchase This Medicine</button>
        </form>
    <% } %>
</body>
</html>