<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Medicine</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="page-container">
        <div class="page-header">
            <h1>Search Medicine by Generic Name</h1>
        </div>

        <form method="POST" action="/searched">
            <label>Enter Generic Medicine Name:</label>
            <input
                type="text"
                name="generic"
                placeholder="e.g. ibuprofen, acetaminophen"
                required
            />
            <button type="submit">Search</button>
        </form>

        <% if (error) { %>
            <div class="error-message">
                <p><%= error %></p>
            </div>
        <% } %>

        <% if (result) { %>
            <div class="content-card">
                <h2>Medicine Found</h2>

                <p><strong>Generic Name:</strong> <%= result.generic_name %></p>
                <p><strong>Brand Name:</strong> <%= result.brand_name %></p>
                <p><strong>Labeler:</strong> <%= result.labeler_name %></p>
                <p><strong>Dosage Form:</strong> <%= result.dosage_form %></p>

                <p style="margin-top: 20px;"><strong>Active Ingredients:</strong></p>
                <ul>
                    <% if (result.active_ingredients.length > 0) { %>
                        <% result.active_ingredients.forEach(ai => { %>
                            <li><%= ai.name %> – <%= ai.strength %></li>
                        <% }) %>
                    <% } else { %>
                        <li>No active ingredient data available</li>
                    <% } %>
                </ul>
                
                <form method="GET" action="/purchase" style="margin-top: 24px; padding: 0; background: transparent; box-shadow: none; border: none;">
                    <input type="hidden" name="medicine" value="<%= result.generic_name %>">
                    <button type="submit">Purchase This Medicine</button>
                </form>
            </div>
        <% } %>

        <a href="/" class="nav-link">← Back to Home</a>
    </div>

    <footer class="home-footer">
        <div class="footer-content">
            <p>CMSC335 Final Project</p>
        </div>
    </footer>
</body>
</html>